<!doctype html><html><head><meta http-equiv=X-UA-Compatible content="ie=edge"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=author content="Ecrose"><meta name=keywords content="Ecrose,Blog,技术"><meta name=description content="Ecrose个人博客，技术分享，数据库，DevOps"><meta name=generator content="Hugo 0.120.4"><title>Oracle 🌟 Ecrose's Blog</title>
<meta property="og:title" content="Oracle"><meta property="og:description" content="Oracle数据库 应用角色和知识分类 数据库应用角色 一、开发。能利用 SQL语句完成数据库的查增删改的基本操作；能用 PL/SQL语句完成及各类逻"><meta property="og:type" content="article"><meta property="og:url" content="https://ecrose.cn/posts/202104012341/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-04-01T23:41:05+08:00"><meta property="article:modified_time" content="2021-04-01T23:41:05+08:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Oracle"><meta name=twitter:description content="Oracle数据库 应用角色和知识分类 数据库应用角色 一、开发。能利用 SQL语句完成数据库的查增删改的基本操作；能用 PL/SQL语句完成及各类逻"><link rel=stylesheet href=https://ecrose.cn/assets/css/style.min.699f46622e3574a7f9ecca4c5877067845fe89ffcd9c4335df2dff23ddae215e.css integrity="sha256-aZ9GYi41dKf57MpMWHcGeEX+if/NnEM13y3/I92uIV4="><script src=https://ecrose.cn/assets/js/main.min.182da266209851bc7c828aa7377f98f914e1e76c8decdd53a6cbe9bffea92cde.js integrity="sha256-GC2iZiCYUbx8goqnN3+Y+RTh52yN7N1Tpsvpv/6pLN4="></script></head><body><header class="header-container layout-block layout-padding"><div class="header-inner content-padding-large soft-size--large soft-style--box"><div class=header-logo><a href=https://ecrose.cn/><h1>Ecrose's Blog</h1></a></div><nav class=header-nav><div class=header-nav--btn><div class=btn-item></div><div class=btn-item></div><div class=btn-item></div></div><div class=header-nav--list><div><a class="list-item soft-size--small soft-style--hover soft-style--active" href=/ title>🏠HOME</a>
<a class="list-item soft-size--small soft-style--hover soft-style--active" href=/posts title>📑POSTS</a>
<a class="list-item soft-size--small soft-style--hover soft-style--active" href=/message title>👀MESSAGE</a>
<a class="list-item soft-size--small soft-style--hover soft-style--active" href=/link title>🔗LINK</a>
<a class="list-item soft-size--small soft-style--hover soft-style--active" href=https://ecrose.cn/index.xml title>🖇️RSS</a></div></div></nav></div></header><main id=content><div class="single-container layout-block"><div class=article-info><div class="article-header layout-padding"><div class="article-cover card-container content-padding-large soft-size--large soft-style--box"><div class=card-cover></div><div class=card-text><h1 class=card-text--title>Oracle</h1><p class=card-text--row>2021-04-01 23:41</p><ul class=card-text--tag><li><a href=https://ecrose.cn/categories/%E6%8A%80%E6%9C%AF/>技术</a></li></ul><ul class=card-text--tag><li><a href=https://ecrose.cn/tags/database/>Database</a></li></ul></div></div></div><div class=article-content><div class="markdown-body content-padding-large soft-size--large soft-style--box"><h1 id=oracle数据库>Oracle数据库</h1><h2 id=应用角色和知识分类>应用角色和知识分类</h2><h3 id=数据库应用角色>数据库应用角色</h3><p>一、开发。能利用 SQL语句完成数据库的查增删改的基本操作；能用 PL/SQL语句完成及各类逻辑的实现。</p><p>二、管理。能完成数据库的安装、部署、参数调试、备份恢复、数据迁移等与系统相关的工作；能完成分配用户、控制权限、表空间划分等与管理相关的工作；能进行故障定位、问题分析等与数据库诊断修复相关的工作。</p><p>三、优化。在深入了解数据库运行原理的基础上，利用各类工具及手段发现并解决数据库存在的性能问题，从而提升数据库运行效率。</p><p>四、设计。深刻理解业务需求和数据库原理，合理高效地完成数据库模型的建设，设计出各类表及索引等数据库对象，让后续应用开发可以高效稳定。</p><h3 id=基础知识分类>基础知识分类</h3><p><p><img src=F:%5cxmTemporare%5cExport-1bf8f116-4377-48b5-ac13-0aaba877e881%5cimg%5c20211023164644.jpg alt=20211023164644 loading=lazy></p></p><h3 id=各角色要求>各角色要求</h3><p><p><img src=F:%5cxmTemporare%5cExport-1bf8f116-4377-48b5-ac13-0aaba877e881%5cimg%5c20211023164702.jpg alt=20211023164702 loading=lazy></p></p><h3 id=各角色选择>各角色选择</h3><p>从企业需求来说，数据库开发所需人数往往是最多的，学会了SQL和PL/SQL的技巧后，大部分人直接就可以从事产品相关的开发，而无论哪个IT企业，从事产品开发的人员数量总是最多的。不仅是数据库开发，从事Java开发、C语言开发的人员，只要他的应用和数据库有关系，就必然会应用到SQL和PL/SQL，差别仅仅是多了一些封装工具而已。由此可见，数据库开发的学习是受众最广的，但是开发就离不开算法，对从业人员的逻辑思维能力要求比较高，尤其是面对复杂需求的时候。
相比数据库开发来说，数据库管理人员的人数需求在IT 市场要少得多。这是由工作性质决定的。无论生产还是测试环境，搭建数据库都不可能非常频繁。另外，如果数据库崩溃需要恢复、数据需要迁移、紧急故障需要处理的情况频繁出现，那这个企业基本上也无法正常运营下去了。但是一旦出现问题，管理人员无法及时恢复故障，将会受到来自各方面的指责，压力非常大。和开发人员相比，管理人员不需要每时每刻地忙碌着，但是却要时刻注意充电，提升自己的应急处理能力，还需要时刻对系统进行健康检查，以防不测。此外，虽然开发人员在逻辑思维方面的要求要高于管理人员，但是责任和压力却远没有管理人员这么大。
数据库优化的角色，不少企业没有设置专门的数据库优化角色，它可能被融入资深开发、资深管理和资深设计人员的技能之中。对于有这样角色的企业来说，场景是这样的：生产环境运行缓慢，数据库管理人员通过跟踪诊断，查出问题所在，原来是SQL语句运行缓慢导致的整个数据库性能低下。那这个时候对于数据库管理人员来说，他的工作结束了，然后优化人员介入，利用自己的知识优化这些SQL语句。在没有专门角色的场景下，可能是这个管理人员有着丰富的技能，他优化了这些SQL语句，也可能是资深开发人员或者是资深设计人员优化了这些SQL语句。但是从工作职责划分、从更专业的角度来说，应该设置专职人员。数据库优化所需要的人员是最难估算的，或许很多，或许很少，甚至没有，但是却是最重要的技能之一。其实开发、管理、设计三个角色，对优化相关知识的学习应该多多益善，懂得越多，工作越得心应手。
数据库设计人员需要掌握的知识点最多，从事数据库设计是最不容易的，这属于核心岗位的位置，少数人的规划和部署决定了产品最终的质量和生命力。从市场需求来说，从事设计的人员最少。一般来说，一个应届毕业生在相关开发、管理岗位努力工作两年后，就可以把开发及管理工作做得比较出色，优化工作做得得心应手应该至少要三年以上，但是要想从事设计相关工作，一般需要五年以上的工作经验。</p><h2 id=oracle介绍>Oracle介绍</h2><h3 id=数据库容量大小分类>数据库容量大小分类</h3><p><strong>小型数据库</strong></p><p>Access、Foxbase</p><p>负载量小，用户一百人以内，成本一千元以内，安全性要求不高</p><p><strong>中型数据库</strong></p><p>SqlServer、MySQL</p><p>负载量，日访问5000-10000；成本万元内</p><p><strong>大型数据库</strong></p><p>sybase、db2、Oracle</p><p>海量负载，处理能力（sybase&lt;Oracle&lt;db2）安全性高</p><h3 id=oracle版本名称后缀意义>Oracle版本名称后缀意义</h3><ul><li><p>c cloud</p></li><li><p>g grade 分布式搭建</p></li><li><p>i internet</p></li></ul><h3 id=oracle特性>Oracle特性</h3><ul><li>自治数据库</li></ul><p><a href=https://www.oracle.com/cn/database/what-is-autonomous-database/ target=_blank rel=noopener>自治数据库是什么 | Oracle 中国 | Oracle 中国</a></p><ul><li><p>自动索引Auto Indexing</p></li><li><p>处理海量数据时的稳定性，性能好</p></li><li><p>物联网内存优化</p></li><li><p>补丁不宕机，备库闪回，多表祖，sqlci</p></li><li><p>语言支持多</p></li><li><p>大数据，数仓支持</p></li><li><p>dba的各种细节操作，索引删加，in memory内外表，列存取</p></li></ul><ul><li>CBO优化器（ <strong>Cost-Based Optimization 基于代价的优化器</strong> ）
CBO 是计算各种可能 “执行计划” 的“代价”，即 COST，从中选用 COST 最低的执行方案，作为实际运行方案。它依赖数据库对象的统计信息，统计信息的准确与否会影响 CBO 做出最优的选择。如果对一次执行 SQL 时发现涉及对象（表、索引等）没有被分析、统计过，那么 ORACLE 会采用一种叫做动态采样的技术，动态的收集表和索引上的一些数据信息。
以前为<strong>RBO: Rule-Based Optimization 基于规则的优化器，已被淘汰。</strong></li></ul><h2 id=oracle结构体系>Oracle结构体系</h2><p>Oracle由磁盘上数据库（DB文件）和数据库管理系统（DBMS）构成，分别对应数据<strong>存储结构</strong>和<strong>软件结构。</strong></p><p><p><img src=F:%5cxmTemporare%5cExport-1bf8f116-4377-48b5-ac13-0aaba877e881%5cimg%5cUntitled.png alt=Untitled loading=lazy></p></p><p><p><img src=F:%5cxmTemporare%5cExport-1bf8f116-4377-48b5-ac13-0aaba877e881%5cimg%5c20211023191224.jpg alt=20211023191224 loading=lazy></p></p><ul><li>Oracle数据库的存储结构（Storage Structure）分为物理存储结构和逻辑存储结构两种，分别描述了在操作系统中和数据库系统内部数据的组织与管理方式。</li><li>Oracle数据库的软件结构，即Oracle实例（Instance），包括内存结构【共享内存区SGA（System Global Area）】与后台进程结构两个部分。</li><li>PGA（ProgramGlobal Area）区，这也是一块内存区，和SGA最明显的区别在于，PGA不是共享内存，是私有不共享的，S理解为共享的首字母。用户对数据库发起的无论查询还是更新的任何操作，都先在PGA进行预处理，然后才进入实例区域，由SGA和后台进程共同完成。</li><li>用户的请求发起经历的顺序一般如下：1区→2区→3区；或者1区→2区。</li><li>预处理作用
主要有三点：
第一，保存用户的连接信息，如会话属性、绑定变量等；
第二，保存用户权限等重要信息，当用户进程与数据库建立会话时，系统会将这个用户的相关权限查询出来，然后保存在这个会话区内；
第三，当发起的指令需要排序的时候，PGA（ProgramGlobal Area）正是这个排序区，如果在内存中可以放下排序的尺寸，就在内存PGA区内完成，如果放不下，超出的部分就在临时表空间中完成排序，也就是在磁盘中完成排序。</li><li>SQL执行 第二次就会比第一次更快？
因为第一次执行保存了共享池的解析动作，缓存了磁盘中的数据，第二次无须再解析，无须再去物理磁盘读取数据
（如果开启执行计划Oracle性能调优
以数值的形式显示两次执行sql语句的差异、
首次执行产生的递归调用，逻辑读，物理读数据与第二次相比都有增加）
其它提升了性能又如索引的体积一般比表小得多，如果能只访问索引完成需求一定比在表中进行更快，这也是少做事。再比如分区表，如果没有设置分区表，则需要全表扫描，如果设置了分区表，或许只需要在某个分区中查找即可，访问的路径少多了，这也是少做事</li><li>一条sql语句执行过程<ol><li>用户发起数据请求，PGA内预处理，连接只是完成了两点，即用户连接信息的保存和权限的保存，并且该指令匹配成唯一的hash值</li><li>指令进入共享池，检查其中是否已经存在相同的hash值，不存在则服务器进程将在 CGA 中, 配合 UGA 内容对sql进行解析（首先查询自己的语句语法是否正确（比如from是否写成了form）、语义是否正确（比如id字段根本就不存在）、是否有权限，通过后hash值存储下来，再根据 ORACLE 选用的优化模式以及数据字典中是否存在相应对象的统计数据和是否使用了存储大纲来生成一个执行计划或从存储大纲中选用一个执行计划, 然后再用数据字典核对此用户对相应对象的执行权限, 最后生成一个编译代码。）ORACLE 将这条sql 语句的本身实际文本、HASH 值、编译代码、与此语名相关联的任何统计数据 和该语句的执行计划缓存在 共享池的 library cache 中，加入锁存器确保不被覆盖。</li><li>sql分析阶段从数据字典中核对表、视图结构时，需要将数据字典从磁盘读入数据缓冲区。（如果设计写或修改等事务磁盘读写加锁，并考虑回滚、恢复和一致性读等问题）</li></ol></li><li>更新数据与回滚是怎样同时实现的，发起提交后，据缓存区中的数据一定会立即被DBWR进程写进磁盘吗？</li></ul><h2 id=存储结构>存储结构</h2><p>![Untitled 1](F:\xmTemporare\Export-1bf8f116-4377-48b5-ac13-0aaba877e881\img\Untitled 1.png)</p><h3 id=物理存储结构>物理存储结构</h3><ul><li>即一系列操作系统文件组成<ul><li><strong>数据文件</strong>是数据库中所有数据的实际存储空间，所有数据文件大小的和构成了数据库的大小。根据数据信息类型不同，数据文件分为永久性数据文件和临时数据文件两种。</li><li><strong>控制文件</strong>是记录数据库结构信息的重要的二进制文件，由Oracle系统进行读写操作，DBA不能直接操作控制文件。数据库启动时，根据初始化参数文件中的CONTROL_FILES参数找到控制文件，然后根据控制文件中的信息，进行数据库数据文件和重做日志文件的加载，最后打开数据库。一个数据库至少需要一个控制文件，如果控制文件损坏将导致数据库无法启动。</li><li><strong>重做日志文件</strong>是以重做记录的形式记录、保存用户对数据库所进行的变更操作，是数据库中最重要的物理文件。利用重做日志文件可以进行事务的重做（REDO）或回退（UNDO），是数据库实例恢复的基础。</li><li><strong>归档重做日志文件</strong>是历史联机重做日志文件的集合，是联机重做日志文件被覆盖之前备份的副本。如果数据库工作在归档模式，数据库归档进程会自动将写满的重做日志文件在覆盖之前复制到指定的位置。归档重做日志文件是数据库出现介质故障后实现数据库完全恢复的必要条件。</li><li><strong>初始化参数文件</strong>是数据库启动过程所必需的文件，记录了数据库显式参数的设置。数据库启动的第一步就是根据初始化参数文件中的设置，创建并启动实例，即分配内存空间、启动后台进程。</li><li><strong>跟踪文件</strong>是数据库中重要的诊断文件跟踪文件中包含数据库系统运行过程中所发生的重大事件的有关信息，可以为数据库运行故障的解决提供重要信息。</li><li><strong>告警文件</strong>也是数据库中重要的诊断文件，记录数据库在启动、关闭和运行期间后台进程的活动情况。在数据库出现故障时，应首先查看该文件，但文件中的信息与任何错误状态没有必然的联系。</li></ul></li></ul><h3 id=逻辑存储结构>逻辑存储结构</h3><p>数据库创建后利用逻辑概念描述数据内部数据的组织和管理形式，存储在数据库的**数据字典（存放数据库对象所有信息，存在形式为字典表或者字典视图，有动态与静态之分）**中</p><ul><li><p>数据字典
Oracle数据字典保存数据库本身的系统信息及所有数据库对象信息，包括：</p><ul><li>各种数据库对象的定义信息，包括表、视图、索引、同义词、序列、存储过程、函数、包、触发器及其他各种对象；</li><li>数据库存储空间分配信息，如为某个数据库对象分配了多少空间，已经使用了多少空间等；</li><li>数据库安全信息，包括用户、权限、角色、完整性等；</li><li>数据库运行时的性能和统计信息；其他数据库本身的基本信息。</li></ul><p>![Untitled 3](F:\xmTemporare\Export-1bf8f116-4377-48b5-ac13-0aaba877e881\img\Untitled 3.png)</p></li><li><p>详细介绍</p><ul><li>数据块，数据库中最小的逻辑存储单元。 在Oracle 11g数据库中，数据块分为标准块和非标准块两种。 Oracle数据库的默认数据缓冲区就是由标准数据块构成，由数据库初始化参数DB_BLOCK_SIZE设置。</li><li>区是由一系列连续的数据块构成的逻辑存储单元，是存储空间分配的最小单位。当创建一个数据库对象时，Oracle为对象分配若干个区，以构成一个段来为对象提供初始的存储空间。当段中已分配的区都写满后，Oracle会为段分配一个新区，以容纳更多的数据。</li><li>段是由一个或多个连续或不连续的区组成的逻辑存储单元。段分类表段索引段临时段回退段（回退段实现事务回滚，数据库恢复，一致性）</li><li>段是由一个或多个连续或不连续的区组成的逻辑存储单元。段分类表段索引段临时段回退段表空间是Oracle数据库最大的逻辑存储单元，数据库的大小从逻辑上看就是由表空间决定表空间与数据库文件直接关联，一个表空间包含一个或多个数据文件，一个数据文件只能从属于某一个表空间，数据库对象就是存储在表空间对应的一个或多个数据文件中。</li><li>表空间是Oracle数据库最大的逻辑存储单元，数据库的大小从逻辑上看就是由表空间决定表空间与数据库文件直接关联，一个表空间包含一个或多个数据文件，一个数据文件只能从属于某一个表空间，数据库对象就是存储在表空间对应的一个或多个数据文件中。</li></ul></li></ul><h2 id=软件结构>软件结构</h2><p>由内存结构和后台进程组成。用户操作数据库实际是与数据库实例进行连接，通过实例操作数据库过程。</p><h3 id=内存结构>内存结构</h3><p>SGA</p><ul><li>SGA是由Oracle分配的共享内存结构，包含一个数据库实例的数据和控制信息。 SGA数据供所有的服务器进程和后台进程共享，所以SGA又称为共享全局区（Shared Global Area）。<ul><li><strong>数据缓存区</strong>存储从数据文件中检索出来的数据拷贝。应用程序要访问的数据必须从磁盘的数据文件读到数据缓冲区中处理。在数据缓冲区中被修改后的数据由数据写入进程写到硬盘的数据文件中永久保存。提高获取和更新数据的性能。</li><li><strong>重做日志缓冲区</strong>用于缓存用户对数据库进行修改操作时生成的重做记录。为了提高工作效率，重做记录并不是直接写入重做日志文件中，而是首先被服务器进程写入重做日志缓冲区中，在一定条件下，再由日志写入进程（LGWR）把重做日志缓冲区的内容写入重做日志文件中做永久性保存。在归档模式下，当重做日志切换时，由归档进程（ARCH）将重做日志文件的内容写入归档文件中</li><li><strong>共享池</strong>用于缓存最近执行过的SQL语句、PL/SQL程序和数据字典信息，是对SQL语句、PL/SQL程序进行语法分析、编译、执行的区域。库缓存库缓存用于缓存已经解释并执行过的SQL语句和PL/SQL程序代码，以提高SQL或PL/SQL程序的执行效率。包括SQL工作区和PL/SQL工作区数据字典缓存区数据字典缓存区保存最常用的数据字典信息</li><li><strong>大型池</strong>是一个可选的内存配置项，主要为Oracle多线程服务器、服务器I/O进程、数据库备份与恢复操作、执行具有大量排序操作的SQL语句、执行并行化的数据库操作等需要大量缓存的操作提供内存空间。如果没有在SGA区中创建大型池，上述操作所需要的缓存空间将在共享池或PGA中分配，因而影响共享池或PGA的使用效率。（可选）</li><li>Java池提供对Java程序设计的支持，用于存储Java代码、Java语句的语法分析表、Java语句的执行方案和进行Java程序开发。（可选）</li><li>流池是一个可选的内存配置项，用于对流的支持。流使用的机制是：从重做日志提取变更向量，并使用这些重新构造执行的语句，或具有相同效果的语句。这些语句在远程数据库执行。从重做日志提取更改的进程以及应用更改的进程将用到内存：此内存就是流池（可选）</li></ul></li></ul><p>PGA</p><ul><li>PGA是一个私有的内存区，不能共享，每个服务器进程只能访问自己的PGA，因此PGA又称为私有全局区（Private Global Area）。 系统同时为每个后台进程分配私有的PGA区。所有服务器进程PGA与所有后台进程PGA大小的和，即为实例的PGA的大小。 PGA随着服务器进程与后台进程的启动而分配，随着服务器进程和后台进程的终止而被释放。
主要作用：
第一，保存用户的连接信息，如会话属性、绑定变量等；第二，保存用户权限等重要信息，当用户进程与数据库建立会话时，系统会将这个用户的相关权限查询出来，然后保存在这个会话区内；第三，当发起的指令需要排序的时候，PGA（ProgramGlobal Area）正是这个排序区，如果在内存中可以放下排序的尺寸，就在内存PGA区内完成，如果放不下，超出的部分就在临时表空间中完成排序，也就是在磁盘中完成排序。</li></ul><h3 id=后台进程>后台进程</h3><ul><li>DBWR 数据库写入进程</li><li>LGWR 日志写入进程</li><li>CKPT 检查点进程</li><li>SMON 系统监控进程</li><li>PMON 进程监控进程</li><li>ARCH 归档进程</li><li>恢复进程（RECO）</li><li>锁进程（LCKn）</li><li>度进程（Dnnn）等</li></ul><h2 id=应用调优>应用调优</h2><p>数据高速缓冲区越大，用户需要的数据在内存中的可能性就越大，即缓存命中率越高，从而减少了Oracle访问硬盘数据的次数，提高了数据库系统执行的效率。然而，如果数据高速缓冲区的值太大，Oracle就不得不在内存中寻找更多的块来定位所需要的数据，反而降低了系统性能。显然需要确定一个合理的数据高速缓冲区大小。</p><h3 id=sql执行>sql执行</h3><pre tabindex=0><code>sql-- 完全删除表，单独drop放入回收站
DROP TABLE t PURGE;
-- 共享池清空
ALTER SYSTEM flush SHARE_POOL;
-- 创建表
CREATE TABLE t (x NUMBER);

--此存储过程执行需要约等于 40 秒
CREATE OR REPLACE PROCEDURE proc1
AS 
BEGIN
FOR i IN 1..100000 LOOP
		execute IMMEDIATE &#39;INSERT INTO t VALUES (&#39;||i||&#39;)&#39;;
COMMIT;
END LOOP;
END;
sql-- 完全删除表，单独drop放入回收站
DROP TABLE t PURGE;
-- 共享池清空
ALTER SYSTEM flush SHARE_POOL;
-- 创建表
CREATE TABLE t (x NUMBER);

--此存储过程执行需要约等于 8.14 秒，进行了变量绑定
CREATE OR REPLACE PROCEDURE proc2
BEGIN
FOR i IN 1..100000 LOOP
		execute IMMEDIATE &#39;INSERT INTO t VALUES (&#39;:x&#39;)&#39; using i;
COMMIT;COMMIT;
END LOOP;
END;
sql-- 完全删除表，单独drop放入回收站
DROP TABLE t PURGE;
-- 共享池清空
ALTER SYSTEM flush SHARE_POOL;
-- 创建表
CREATE TABLE t (x NUMBER);

--此存储过程执行需要约等于 6 秒，没有动态执行，改为静态sql
CREATE OR REPLACE PROCEDURE proc3
AS 
BEGIN
FOR i IN 1..100000 LOOP
	INSERT INTO t VALUES (i); 
COMMENT;
END LOOP;
END;
sql-- 完全删除表，单独drop放入回收站
DROP TABLE t PURGE;
-- 共享池清空
ALTER SYSTEM flush SHARE_POOL;
-- 创建表
CREATE TABLE t (x NUMBER);

--此存储过程执行需要约等于 2秒，循环外COMMIT，减少触发LGWR将Redo Buffer写出到Redo Log中
CREATE OR REPLACE PROCEDURE proc4
AS 
BEGIN
FOR i IN 1..100000 LOOP
	INSERT INTO t VALUES (i); 
END LOOP;
COMMIT;
END;
sql
-- 完全删除表，单独drop放入回收站
DROP TABLE t PURGE;
-- 共享池清空
ALTER SYSTEM flush SHARE_POOL;
-- 创建表
CREATE TABLE t (x NUMBER);

--此插入约等于 0.25 秒，由一条一条依次插入，转为集合，整批写入数据缓存区中
INSERT INTO SELECT ROWNUM FROM dual CONNECT BY LEVEL &lt;= 100000;
</code></pre><p>之后插入数据量上升至1000万</p><pre tabindex=0><code>sql-- 完全删除表，单独drop放入回收站
DROP TABLE t PURGE;
-- 共享池清空
ALTER SYSTEM flush SHARE_POOL;
-- 创建表
CREATE TABLE t (x NUMBER);

--此插入约等于 23 秒
INSERT INTO SELECT ROWNUM FROM dual CONNECT BY LEVEL &lt;= 10000000;
sql-- 完全删除表，单独drop放入回收站
DROP TABLE t PURGE;
-- 共享池清空
ALTER SYSTEM flush SHARE_POOL;
-- 创建表，并插入数据
CREATE TABLE t AS SELECT ROWNUM x FROM dual CONNECT BY LEVEL &lt;= 10000000;
-- 此插入约等于 10 秒 create table t 的方式跳过了数据缓存区，直接将数据写进磁盘(直接路径读写方式)
sql-- 完全删除表，单独drop放入回收站
DROP TABLE t PURGE;
-- 共享池清空
ALTER SYSTEM flush SHARE_POOL;
-- 创建表，并插入数据
CREATE TABLE t nologging parallel 16
AS SELECT ROWNUM x FROM dual CONNECT BY LEVEL &lt;= 10000000;
--此插入约等于 3 秒 最小化日志产生的数量,并设置并行执行
</code></pre><h2 id=对关系型数据库的批评>对关系型数据库的批评</h2><p>主要是著名IT博主王垠对数据库的一些看法。</p><p><a href=https://www.zhihu.com/question/329153374 target=_blank rel=noopener>如何看待王垠对数据库的理解？</a></p><p><a href=http://www.yinwang.org/blog-cn/2014/04/24/relational target=_blank rel=noopener>关系式模型的实质</a></p><p><a href=https://www.jianshu.com/p/092b1555ca3d target=_blank rel=noopener>SQL，NoSQL 以及数据库的实质</a></p><h2 id=数据库学习的相关建议>数据库学习的相关建议</h2><p>数据库的广阔市场一直都在，但随着云计算的应用，企业正将新应用向云转移，对数据存储和计算分析的能力要求不断加强。而早在2012年，工信部就提出去“IOE”化。（IOE三者均为海外IT巨头，其中IBM代表硬件以及整体解决方案服务商，Oracle甲骨文代表数据库，EMC易安信代表数据存储。）同时又由于中美贸易战的缘由，以及十四五的信创计划（即一系列信息化创新技术，可理解为数字基建，是新基建最底层的一环，主要包括核心芯片、基础硬件、操作系统、中间件和数据服务器等领域）就更是加大了对国产数据库的扶持。并且在后端开发，服务的构建也都离不开数据库的支持，所以数据库的学习十分有必要。</p><h3 id=入门>入门</h3><p>关系型数据库的学习可以由任一种DBMS入手，大部分sql语言都是通用的（只是不同DBMS支持的标准不同，以及一些语句的实现原理不同，同时不同DBMS有自家的sql拓展）</p><p>SQL语言的学习十分简单，主要是多做练习巩固SQL查找的思维方式，就推荐《SQL必知必会》一两天即可看完。</p><p>数据库原理的学习推荐两本书：</p><ol><li>王珊, 萨师煊. 数据库系统概论(第5版). 北京: 高等教育出版社, 2014 （萨师煊是是我国数据库学科的奠基人之一，本书内容也讲的十分清晰全面）</li><li>A First Course in Database Systems, Jennifer Widom. 杨冬青 等译. 数据库系统基础教程(原书第3版). 北京: 机械工业出版社, 2009（这本书是斯坦福大学CS145教材,讲得浅显易懂,书中对概念基本都举出了清晰的例子，每章的参考文献也很棒，列出了许多数据库领域重要的论文，是深入数据的基础）</li></ol><h3 id=进阶>进阶</h3><p>经过数据库的入门学习，就应该大致了解数据库的相关应用，根据自身需求进一步选择对应的角色进行学习，这里根据数据内核设计提供一些建议（需要操作系统的基础，推荐CMU15213）</p><ol><li>Hector Garcia-Mlina, Jeffrey D. Ullman, Jennifer Widom. 杨冬青 等译. 数据库系统实现. 北京: 机械工业出版社, 2010（为斯坦福CS245及一部分CS346课程编写，主要讲解DBMS的实现）</li><li>Abraham Silberschatz, Henry F.Korth, S. Sudarshan. 杨冬青 等译. 数据库系统概念(第6版). 北京: 机械工业出版社, 2012（帆船书，主要作为工具书使用，大而全）</li><li>李海翔. 数据库查询优化器的艺术原理解析与SQL性能优化. 北京: 机械工业出版社, 2014（对数据执行器的讲解，更便实践）</li></ol><p>在学习的同时可以结合一些数据库的比赛，将自己学的知识落地，比如阿里天池和oceanbase、TIDB等官网都常年有数据库相关比赛（偏向于内核设计），同时也可参加国内知名数据库厂商培养课程如<a href=https://learn.pingcap.com/learner/talent-plan target=_blank rel=noopener>pincap的数据库的 Talent Plan 课程</a>。</p></div></div><div class=article-paging><section class="post-paging--item card-container content-padding-primary soft-size--primary soft-style--box"><div class=card-cover></div><div class=card-text><a href=/posts/202203062332/><h4 class="card-text--title text-ellipsis">数据库原理基础</h4></a><p class=card-text--row>2022-03-06 23:32</p></div></section><section class="post-paging--item card-container content-padding-primary soft-size--primary soft-style--box"><div class=card-cover></div><div class=card-text><a href=/posts/202103092340/><h4 class="card-text--title text-ellipsis">日常中的隐写术</h4></a><p class=card-text--row>2021-03-09 23:40</p></div></section></div></div><aside class=widget-info><section class="aside-widget widget-author content-padding-large soft-size--large soft-style--box"><div class=widget-body><div class="author-box avatar"><img class="author-avatar soft-size--round soft-style--box" src=https://cdn.jsdelivr.net/gh/2cracer2/oss@master/uPic/iol.svg alt=Ecrose><h2 class="author-name text-ellipsis">Ecrose</h2><p class="author-desc text-ellipsis">尽心尽力，自有万里长风。</p></div></div></section><section class="aside-widget widget-articles content-padding-large soft-size--large soft-style--box"><h2 class=widget-header><div class=title><span>Related Posts</span></div></h2><div class=widget-body><ul class=post-list><li class=post-item><a href=/posts/202103092340/>日常中的隐写术</a></li></ul></div></section><section class="aside-widget widget-categories content-padding-large soft-size--large soft-style--box"><h2 class=widget-header><div class=title><span>Categories</span></div></h2><div class=widget-body><ul class=categories-list><li><a href=https://ecrose.cn/categories/%E6%9D%82%E6%8A%80%E6%B5%85%E5%B0%9D/>杂技浅尝</a>
<span>5</span></li><li><a href=https://ecrose.cn/categories/%E6%8A%80%E6%9C%AF/>技术</a>
<span>2</span></li><li><a href=https://ecrose.cn/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/>数据库</a>
<span>1</span></li><li><a href=https://ecrose.cn/categories/%E6%9D%82%E4%B8%83%E6%9D%82%E5%85%AB/>杂七杂八</a>
<span>1</span></li></ul></div></section><section class="aside-widget widget-tags content-padding-large soft-size--large soft-style--box"><h2 class=widget-header><div class=title><span>Tags</span></div></h2><div class=widget-body><div class=tags-list><a href=https://ecrose.cn/tags/%E8%B5%84%E6%BA%90/ data-count=3 class="soft-size--small soft-style--hover soft-style--active">资源</a>
<a href=https://ecrose.cn/tags/database/ data-count=2 class="soft-size--small soft-style--hover soft-style--active">Database</a>
<a href=https://ecrose.cn/tags/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/ data-count=1 class="soft-size--small soft-style--hover soft-style--active">工具使用</a>
<a href=https://ecrose.cn/tags/%E6%95%B0%E6%8D%AE%E5%A4%87%E4%BB%BD/ data-count=1 class="soft-size--small soft-style--hover soft-style--active">数据备份</a>
<a href=https://ecrose.cn/tags/%E6%97%A5%E5%B8%B8/ data-count=1 class="soft-size--small soft-style--hover soft-style--active">日常</a>
<a href=https://ecrose.cn/tags/%E9%9A%90%E5%86%99%E6%9C%AF/ data-count=1 class="soft-size--small soft-style--hover soft-style--active">隐写术</a></div></div></section></aside></div></main><footer class="footer-container layout-block"><div class=social-icons><a class="soft-size--primary soft-style--box" href=https://github.com/2cracer2 target=_blank rel="noopener noreferrer"><svg class="icon icon-github" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path d="M64.6 512c0 195.6 125.4 361.9 300.1 422.9 23.5 5.9 19.9-10.8 19.9-22.2v-77.6c-135.8 15.9-141.3-74-150.5-89-18.5-31.5-61.9-39.5-49-54.5 31-15.9 62.5 4 98.9 58 26.4 39.1 77.9 32.5 104.1 26 5.7-23.5 17.9-44.5 34.7-60.9-140.7-25.2-199.4-111.1-199.4-213.3.0-49.5 16.4-95.1 48.4-131.8-20.4-60.6 1.9-112.4 4.9-120.1 58.2-5.2 118.5 41.6 123.3 45.3 33.1-8.9 70.8-13.7 112.9-13.7 42.4.0 80.3 4.9 113.5 13.9 11.3-8.6 67.3-48.8 121.4-43.9 2.9 7.7 24.7 58.3 5.5 118.1 32.5 36.8 49 82.8 49 132.4.0 102.3-59 188.3-200.2 213.2 23.5 23.3 38.1 55.5 38.1 91.1v112.7c.8 9 0 17.9 15.1 17.9C832.7 877 960.4 709.4 960.4 512.1c0-247.5-200.6-447.9-447.9-447.9C265 64.1 64.6 264.5 64.6 512z"/></svg></a><a class="soft-size--primary soft-style--box" href=https://twitter.com/ target=_blank rel="noopener noreferrer"><svg class="icon icon-twitter" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path d="M962.285714 233.142857q-38.285714 56-92.571429 95.428571.571429 8 .571429 24 0 74.285714-21.714286 148.285714t-66 142-105.428571 120.285714-147.428571 83.428571-184.571429 31.142857q-154.857143.0-283.428571-82.857143 20 2.285714 44.571429 2.285714 128.571429.0 229.142857-78.857143-60-1.142857-107.428571-36.857143t-65.142857-91.142857q18.857143 2.857143 34.857143 2.857143 24.571429.0 48.571429-6.285714-64-13.142857-106-63.714286t-42-117.428571v-2.285714q38.857143 21.714286 83.428571 23.428571-37.714286-25.142857-60-65.714286t-22.285714-88q0-50.285714 25.142857-93.142857 69.142857 85.142857 168.285714 136.285714t212.285714 56.857143q-4.571429-21.714286-4.571429-42.285714.0-76.571429 54-130.571429t130.571429-54q80 0 134.857143 58.285714 62.285714-12 117.142857-44.571429-21.142857 65.714286-81.142857 101.714286 53.142857-5.714286 106.285714-28.571429z"/></svg></a><a class="soft-size--primary soft-style--box" href=https://www.instagram.com/ target=_blank rel="noopener noreferrer"><svg class="icon icon-instagram" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path d="M512 0C372.906667.0 355.541333.64 300.928 3.072 246.4 5.632 209.28 14.208 176.64 26.88c-33.664 13.056-62.250667 30.592-90.709333 59.050667S39.893333 142.933333 26.88 176.64C14.208 209.28 5.589333 246.4 3.072 300.928.512 355.541333.0 372.906667.0 512s.64 156.458667 3.072 211.072c2.56 54.485333 11.136 91.648 23.808 124.288a251.093333 251.093333.0 0059.050667 90.709333A250.368 250.368.0 00176.64 997.12c32.682667 12.629333 69.802667 21.290667 124.288 23.808C355.541333 1023.488 372.906667 1024 512 1024s156.458667-.64 211.072-3.072c54.485333-2.56 91.648-11.178667 124.288-23.808a251.648 251.648.0 0090.709333-59.050667A250.026667 250.026667.0 00997.12 847.36c12.629333-32.64 21.290667-69.802667 23.808-124.288 2.56-54.613333 3.072-71.978667 3.072-211.072s-.64-156.458667-3.072-211.072c-2.56-54.485333-11.178667-91.690667-23.808-124.288a251.306667 251.306667.0 00-59.050667-90.709333A249.472 249.472.0 00847.36 26.88C814.72 14.208 777.557333 5.589333 723.072 3.072 668.458667.512 651.093333.0 512 0zm0 92.16c136.661333.0 152.96.682667 206.933333 3.029333 49.92 2.346667 77.013333 10.624 95.018667 17.706667 23.978667 9.258667 40.96 20.352 58.965333 38.229333 17.877333 17.92 28.970667 34.944 38.229334 58.922667 6.997333 18.005333 15.36 45.098667 17.621333 95.018667C931.2 359.082667 931.754667 375.296 931.754667 512s-.64 152.96-3.157334 206.933333c-2.602667 49.92-10.922667 77.013333-17.962666 95.018667a162.56 162.56.0 01-38.357334 58.965333 159.744 159.744.0 01-58.88 38.229334c-17.92 6.997333-45.44 15.36-95.36 17.621333C663.68 931.2 647.68 931.754667 510.72 931.754667c-137.002667.0-153.002667-.64-207.317333-3.157334C253.44 925.994666 225.92 917.674666 208 910.634667a158.549333 158.549333.0 01-58.837333-38.357334 155.477333 155.477333.0 01-38.4-58.88c-7.04-17.92-15.317333-45.44-17.92-95.36-1.92-53.76-2.602667-70.357333-2.602667-206.677333.0-136.362667.682667-153.002667 2.602667-207.402667 2.602667-49.92 10.88-77.397333 17.92-95.317333 8.96-24.32 20.437333-40.96 38.4-58.922667C167.04 131.84 183.722667 120.32 208 111.402667 225.92 104.32 252.842667 96 302.762667 93.44c54.4-1.92 70.4-2.56 207.317333-2.56l1.92 1.28zm0 156.928a262.912 262.912.0 100 525.824 262.912 262.912.0 100-525.824zm0 433.578667c-94.293333.0-170.666667-76.373333-170.666667-170.666667S417.706666 341.333333 512 341.333333 682.666667 417.706666 682.666667 512 606.293334 682.666667 512 682.666667zM846.762667 238.72a61.482667 61.482667.0 01-122.88.0 61.44 61.44.0 01122.88.0z"/></svg></a><a class="soft-size--primary soft-style--box" href=https://weibo.com/ target=_blank rel="noopener noreferrer"><svg class="icon icon-weibo" viewBox="0 0 1025 1024" xmlns="http://www.w3.org/2000/svg"><path d="M385.682429 733.696q11.995429-19.456 6.290286-39.424t-25.746286-28.598857q-19.456-7.972571-41.691429-.585143t-34.304 26.258286q-12.580571 19.456-7.460571 39.131429t24.576 28.891429 42.569143 1.462857 35.693714-27.136zm53.76-69.12q4.534857-7.460571 1.974857-15.140571t-10.020571-10.605714q-7.972571-2.852571-16.310857.292571t-12.288 10.605714q-9.728 17.700571 7.460571 25.746286 7.972571 2.852571 16.603429-.292571t12.580571-10.605714zm99.401143 61.147429q-25.746286 58.294857-90.258286 85.723429t-128 6.875429q-61.147429-19.456-84.260571-72.265143t3.730286-107.154286q26.843429-53.174857 86.601143-79.433143t120.32-10.825143q63.414857 16.603429 90.550857 68.315429t1.462857 108.836571zm178.322286-91.428572q-5.12-54.857143-50.834286-97.133714t-119.149714-62.317714T390.290429 462.848Q262.875572 476.013714 179.127 543.670857T103.424143 694.784q5.12 54.857143 50.834286 97.133714t119.149714 62.317714 156.891429 11.995429Q557.714429 853.065143 641.463001 785.408t75.702857-151.113143zM893.147572 636.562286q0 38.838857-21.138286 79.725714t-62.317714 78.262857-96.256 67.145143-129.170286 47.396571-154.550857 17.700571-157.110857-19.163429-137.435429-53.174857-98.011429-86.308571-37.156571-114.029714q0-65.682286 39.716571-139.995429t112.859429-147.456q96.548571-96.548571 195.145143-134.875429t140.873143 4.022857q37.156571 36.571429 11.410286 119.442286-2.267429 7.972571-.585143 11.410286t5.705143 4.022857 8.265143-.292571 7.68-1.974857l3.437714-1.170286q79.433143-33.718857 140.580571-33.718857t87.405714 34.889143q25.746286 35.986286.0 101.741714-1.170286 7.460571-2.56 11.410286t2.56 7.168 6.875429 4.315429 9.728 3.437714q32.548571 10.313143 58.88 26.843429t45.714286 46.592 19.456 66.56zM850.871001 279.990857q23.990857 26.843429 31.158857 62.025143t-3.730286 67.145143q-4.534857 13.165714-16.822857 19.456t-25.453714 2.267429q-13.165714-4.534857-19.456-16.822857t-2.267429-25.453714q11.410286-35.986286-13.677714-63.414857t-61.147429-19.968q-13.677714 2.852571-25.746286-4.534857t-14.262857-21.138286q-2.852571-13.677714 4.534857-25.453714t21.138286-14.555429q34.304-7.460571 68.022857 3.145143T850.871 280.137144zM954.295001 186.88q49.737143 54.857143 64.292571 127.122286t-7.68 138.020571q-5.12 15.433143-19.456 22.820571t-29.696 2.267429-22.820571-19.456-2.852571-29.696q16.018286-46.884571 5.705143-98.304t-45.714286-90.258286q-35.401143-39.424-84.553143-54.564571t-98.889143-4.827429q-16.018286 3.437714-29.696-5.412571t-17.115429-24.868571T671.232143 120.32t24.868571-16.822857Q766.391 88.649143 835.511 110.08t118.857143 76.873143z"/></svg></a><a class="soft-size--primary soft-style--box" href=https://www.zhihu.com/ target=_blank rel="noopener noreferrer"><svg class="icon icon-zhihu" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path d="M544.949 561.422s0-71.387-34.779-75.05-142.775.0-142.775.0V266.718h161.078s-1.83-73.219-32.949-73.219H233.769l43.93-117.148s-65.897 3.663-89.692 45.761-98.844 252.604-98.844 252.604 25.627 10.983 67.726-20.134c42.101-31.116 56.743-86.033 56.743-86.033l76.879-3.663 1.83 223.316s-133.621-1.83-161.078.0-42.101 75.05-42.101 75.05h203.182s-18.307 124.47-69.557 214.164c-53.085 89.692-151.929 161.078-151.929 161.078s71.387 29.287 140.947-10.983c69.557-42.101 120.811-223.316 120.811-223.316l162.912 203.182s14.643-97.013-1.83-124.47c-18.307-27.457-113.49-137.283-113.49-137.283l-42.101 36.607 29.287-120.811h177.552zM587.05 188.01l-1.83 660.793h65.897l23.795 82.37 115.321-82.37h162.912V188.01H587.054zM879.92 775.584h-76.879l-97.013 75.05-21.965-75.05h-20.134V263.057H879.92v512.527z"/></svg></a></div><div class=colour-bar></div><p>© 2022 <a href=https://github.com/2cracer2>Ecrose</a>.</p><p>Powered by
<a href=https://gohugo.io/ target=_blank rel="noopener noreferrer">Hugo</a>
Theme -
<a href=https://github.com/miiiku/hugo-theme-kagome target=_blank rel="noopener noreferrer author">kagome</a></p><p><a href=javascript:; id=theme-light>🌞 light</a>
<a href=javascript:; id=theme-dark>🌛 dark</a>
<a href=javascript:; id=theme-auto>🤖️ auto</a></p></footer></body></html>